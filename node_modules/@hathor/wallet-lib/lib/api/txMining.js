"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

var _txMiningAxios = _interopRequireDefault(require("./txMiningAxios"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

/**
 * Copyright (c) Hathor Labs and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */

/**
 * Api calls for tx mining
 *
 * @namespace ApiTxMining
 */
const txMiningApi = {
  /**
   * Submit tx to be mined
   *
   * @param {String} tx Data in hexadecimal
   * @param {boolean} propagate If should propagate tx after the job is completed
   * @param {boolean} add_parents If should return the parents
   * @param {Number} timeout Optional parameter to define the timeout of the submit job in seconds
   *
   * @return {Promise}
   * @memberof txMiningApi
   * @inner
   */
  submitJob(tx, propagate, add_parents, timeout, resolve) {
    let postData = {
      tx,
      propagate,
      add_parents
    };

    if (timeout) {
      postData.timeout = timeout;
    }

    return (0, _txMiningAxios.default)(resolve).post('submit-job', postData).then(res => {
      resolve(res.data);
    }, res => {
      return Promise.reject(res);
    });
  },

  /**
   * Get job status
   *
   * @param {String} job Job id
   *
   * @return {Promise}
   * @memberof txMiningApi
   * @inner
   */
  getJobStatus(job, resolve) {
    const data = {
      'job-id': job
    };
    return (0, _txMiningAxios.default)(resolve).get('job-status', {
      'params': data
    }).then(res => {
      resolve(res.data);
    }, res => {
      return Promise.reject(res);
    });
  },

  /**
   * Cancel a job
   *
   * @param {String} job Job id
   *
   * @return {Promise}
   * @memberof txMiningApi
   * @inner
   */
  cancelJob(job, resolve) {
    const data = {
      'job-id': job
    };
    return (0, _txMiningAxios.default)(resolve).post('cancel-job', data).then(res => {
      resolve(res.data);
    }, res => {
      return Promise.reject(res);
    });
  }

};
var _default = txMiningApi;
exports.default = _default;